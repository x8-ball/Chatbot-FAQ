<html>
<head>
<title>Chatbot Robi</title>
<link rel="stylesheet" href="sprechblase.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>

<script type="text/javascript">
var socket = io.connect('http://127.0.0.1:5000');
function sendEvaluation(id, helpful){
	var message = {
		"type" : "rating",
		"id" : id,
		"helpful" : helpful
	};
	socket.send(message);
}
$(document).ready(function() {
	//empfange message und hänge diese an messages an
	socket.on('message', function(msg) {
		if(msg.session_id){
			console.log(msg.session_id + " connected");
		}
		else{
			var appendum = '<dd> ich denke '+msg.answer + ' | war diese antwort hilfreich? : <button onClick=sendEvaluation("'+msg.id.toString()+'","false")><button onClick=sendEvaluation("'+msg.id.toString()+'","true")> </dd>';
			$("#messages").append(appendum);
			console.log(appendum);
		}
	});
	//sende Nachricht und resette danach fenster von myMessage
	$('#sendbutton').on('click', function() {
		var message = {
			"text" : $('#myMessage').val(),
			"type" : "question"
		};
		console.log(typeof message);
		console.log(message);
		if(message){
			socket.send(message);
			$("#messages").append('<dt>'+message+'</dt>');
			$('#myMessage').val('');
			console.log("Sent " + message);
		}
		else{
			console.log("bitte gib doch eine nachricht ein")
		}
	});
});
</script>


<img id="img1" src="robi1.png" alt="Chatbot" width="500" height=auto ><nobr></nobr>
 <img id="img2" src="robi2.png" alt="Chatbot" width="500" height=auto style="visibility:hidden">
 <script type="text/javascript">
      function tend() {
        document.getElementById('img1').style.visibility='hidden';
		document.getElementById('img2').style.visibility='visible';
      }
    </script>

 <div id="sprechblase">
	<h4> Hallo Lernender </h4>
   <dl widht=300px id="myMessages">
   </dl>

   <input type="hidden" id="message">
   <input type="hidden" id="sendbutton" onclick="tend()" value="back">
 </div>

 <div id="eingabefeld">
	<input type="text" id="myMessage" placeholder="Frage hier eintippen">
	<button id="sendbutton" onclick="tend()" value="back">Send</button>
 </div>
 
 <div id="sprechblase:before"> 
 </div>

 <div id="sprechblase:after">
 </div>

</body>
</html>